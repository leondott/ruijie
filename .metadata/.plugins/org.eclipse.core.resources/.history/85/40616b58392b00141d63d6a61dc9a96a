package com.ruijie.rush.db;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class DBHelper extends SQLiteOpenHelper {

	private static final String CREATE_BOOK = "CREATE TABLE IF NOT EXISTS Book ("
			+ "_id INTEGER PRIMARY KEY AUTOINCREMENT, "
			+ "author TEXT, "
			+ "name TEXT, " 
			+ "price REAL, " 
			+ "pages INTEGER, "
			+ "category_id integer)";
	private static final String CREATE_CATEGORY = "CREATE TABLE IF NOT EXISTS Category ("
			+ "_id INTEGER PRIMARY KEY AUTOINCREMENT, "
			+ "category_name TEXT, "
			+ "category_code integer)";
	private static final String ALERT_BOOK = "ALERT TABLE Book ADD COLUME category_id INTEGER";

	public DBHelper(Context context, String name, CursorFactory factory,
			int version) {
		super(context, name, factory, version);
	}

	@Override
	public void onCreate(SQLiteDatabase db) {
		db.execSQL(CREATE_BOOK);
		db.execSQL(CREATE_CATEGORY);
	}

	@Override
	public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
		switch (oldVersion) {
		case 1:
			db.execSQL(CREATE_CATEGORY);//不能有beak，避免跨版本升级
		case 2:
			db.execSQL(ALERT_BOOK);
		}
	}

}
